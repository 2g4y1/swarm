#!/bin/bash

IFS=', ' read -r -a ARRAYhornetApiPublicRoutes <<< "$hornetApiPublicRoutes"
hornetApiPublicRoutes="${hornetApiPublicRoutes%?}"

parser="$(jq '.restAPI.publicRoutes' $hornetHome/$hornetConfig.json)"
parser="$(echo $parser | tr -d '[]" ')"

if [ "$parser" != "$hornetApiPublicRoutes" ]; then
    sudo jq '.restAPI.publicRoutes |= []' $hornetHome/$hornetConfig.json|sponge $hornetHome/$hornetConfig.json
    for hornetApiPublicRoute in "${ARRAYhornetApiPublicRoutes[@]}"
    do
        sudo jq '.restAPI.publicRoutes |= .+ ["'$hornetApiPublicRoute'"]' $hornetHome/$hornetConfig.json|sponge $hornetHome/$hornetConfig.json
    done
    restartHornet=true
fi
unset ARRAYhornetApiPublicRoutes
unset hornetApiPublicRoute