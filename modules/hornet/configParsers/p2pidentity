#!/bin/bash
    IFS=', ' read -r -a ARRAYhornetConfigs <<< "$hornetConfigs"

    for hornetConfig in "${ARRAYhornetConfigs[@]}"
    do
        parser="$(jq '.p2p.identityPrivateKey' $hornetDir/$hornetConfig.json)"
        if [ "$parser" = "\"\"" ]; then
            if [ -z "$p2pidentity" ]; then
                p2pidentity=$($hornetDir/hornet tool p2pidentity | grep "private key" | awk '{print $5}')
                sudo jq '.p2p.identityPrivateKey = "'$p2pidentity'"' $hornetDir/$hornetConfig.json|sponge $hornetDir/$hornetConfig.json
            else
                sudo jq '.p2p.identityPrivateKey = "'$p2pidentity'"' $hornetDir/$hornetConfig.json|sponge $hornetDir/$hornetConfig.json
            fi
        else
            if [ -z "$p2pidentity" ]; then
                sudo sed -i 's/p2pidentity=.*/p2pidentity='$parser'/' $configs/hornet.cfg
            else
                if [ "$parser" != "\"$p2pidentity\"" ]; then
                    sudo jq '.p2p.identityPrivateKey = "'$p2pidentity'"' $hornetDir/$hornetConfig.json|sponge $hornetDir/$hornetConfig.json
                fi
            fi
        fi
    done
unset ARRAYhornetConfigs
unset hornetConfig