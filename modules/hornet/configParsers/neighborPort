#!/bin/bash

IFS=', ' read -r -a ARRAYhornetConfigs <<< "$hornetConfigs"

for hornetConfig in "${ARRAYhornetConfigs[@]}"
do
    parser="$(jq '.network.gossip.bindAddress' $hornetDir/$hornetConfig.json)"
    if [ "\"0.0.0.0:$neighborPort\"" != "$parser" ]; then
        if [ -n "$neighborPort" ] && [ "$neighborPort" -ge 0 ] 2>/dev/null; then
            sudo jq '.network.gossip.bindAddress = "0.0.0.0:'$neighborPort'"' $hornetDir/$hornetConfig.json|sponge $hornetDir/$hornetConfig.json
        fi
    fi
done
unset ARRAYhornetConfigs
unset hornetConfig
