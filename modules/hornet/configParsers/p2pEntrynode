#!/bin/bash
if [ "$network" = "mainnet" ]; then
    entrynode="/dns/entry-mainnet.tanglebay.com/udp/14626/autopeering/iot4By1FD4pFLrGJ6AAe7YEeSu9RbW9xnPUmxMdQenC"
    parser="$(jq '.p2p.autopeering.entryNodes' $hornetDir/config.json)"
    if [[ $parser != *$entrynode* ]]; then
        sudo jq '.p2p.autopeering.entryNodes |= .+ ["'$entrynode'"]' $hornetDir/config.json|sponge $hornetDir/config.json
        restartHornet=true
        echo "entryMainnet=true" >> /root/update.log
    fi
    unset entrynode
    unset parser
fi
if [ "$network" = "comnet" ]; then
    entrynode="/dns/entry-comnet.tanglebay.com/udp/14636/autopeering/iot4By1FD4pFLrGJ6AAe7YEeSu9RbW9xnPUmxMdQenC"
    parser="$(jq '.p2p.autopeering.entryNodes' $hornetDir/config_comnet.json)"
    if [[ $parser != *$entrynode* ]]; then
        sudo jq '.p2p.autopeering.entryNodes |= .+ ["'$entrynode'"]' $hornetDir/config_comnet.json|sponge $hornetDir/config_comnet.json
        restartHornet=true
        echo "EntryComnet=true" >> /root/update.log
    fi
    unset entrynode
    unset parser
fi