#!/bin/bash
source $configs/hornet.cfg
source $configs/swarm.cfg
source $configs/proxy.cfg

mv $configs/swarm.cfg $configs/swarmCfgBak
mv $configs/hornet.cfg $configs/hornetCfgBak
mv $configs/proxy.cfg $configs/proxyCfgBak
#mv $logs/dbPruner $logs/dbPrunerBak
mv $logs/watchdog $logs/watchdogBak
echo $autoRevalidation >> /root/log.txt
currentBranch=$( cd $swarmDir ; git rev-parse --abbrev-ref HEAD )
( cd $swarmDir ; sudo git pull ) > /dev/null 2>&1
( cd $swarmDir ; sudo git reset --hard origin/$currentBranch ) > /dev/null 2>&1
sudo chmod +x $swarmDir/swarm $plugins/watchdog $plugins/dbPruner
source $modules/variables
source $modules/swarm/updateParser
echo $autoRevalidation >> /root/log.txt
if [ -f "/usr/bin/hornet" ]; then
    source $modules/hornet/configParser
    echo $autoRevalidation >> /root/log.txt
fi
if [ "$swarmManualUpdate" != "true" ]; then
    whiptail --title "SWARM Menu" --msgbox "SWARM update successfully" 8 65
    clear
    exit 0
fi