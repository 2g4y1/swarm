#!/bin/bash

if [ "$autoupdate" = "true" ]; then
    autoupdate=enabled
else
    autoupdate=disabled
fi

# Sync Check
if [ "$checksync" = "true" ]; then
    checksync=enabled
else
    checksync=disabled
fi

# Log Pruning
if [ "$logpruning" = "true" ]; then
    logpruning=enabled
else
    logpruning=disabled
fi

# DB size
getcurrentdbsize="$(du -sb $hornetdir/${network}db/tangle.db | cut -f1)"
let getcurrentdbsizeingb=$getcurrentdbsize/1000000000
if [ "$getcurrentdbsizeingb" -le "0" ]; then
    let getcurrentdbsizeinmb=$getcurrentdbsize/1000000
    currentdbsize="$getcurrentdbsizeinmb MB"
else
    currentdbsize="$getcurrentdbsizeingb GB"
fi

if [ -z "$lastprunedt" ]; then
    unset lastprunedt
fi

whiptail --title "SWARM Info [v$version]" --msgbox ""\nWatchdog: $wdstatus\nNode-updater: $autoupdate\nSync-check: $checksync\nLog-pruner: $logpruning\n\nDBPruner: $dbprunerstatus\nDB size: $currentdbsize\nLast pruning: $lastprunedt" 8 65