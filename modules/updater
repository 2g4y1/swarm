#!/bin/bash

# Upater for Hornet.cfg
sudo sed -i 's/release=.*/release='$release'/' $configs/hornet.cfg
sudo sed -i 's/network=.*/network='$network'/' $configs/hornet.cfg
sudo sed -i 's/pow=.*/pow='$pow'/' $configs/hornet.cfg
sudo sed -i 's/neighborport=.*/neighborport='$neighborport'/' $configs/hornet.cfg
sudo sed -i 's/autopeeringport=.*/autopeeringport='$autopeeringport'/' $configs/hornet.cfg
sudo sed -i 's/lsdelay=.*/lsdelay='$lsdelay'/' $configs/hornet.cfg
sudo sed -i 's/pruning=.*/pruning='$pruning'/' $configs/hornet.cfg
sudo sed -i 's/pruningdelay=.*/pruningdelay='$pruningdelay'/' $configs/hornet.cfg
sudo sed -i 's/enableplugins=.*/enableplugins='$enableplugins'/' $configs/hornet.cfg
sudo sed -i 's/disableplugins=.*/disableplugins='$disableplugins'/' $configs/hornet.cfg
if [ -n "$inbound" ] && [ "$inbound" -ge 0 ] 2>/dev/null; then
    sudo sed -i 's/inbound=.*/inbound='$inbound'/' $configs/hornet.cfg
fi
if [ -n "$outbound" ] && [ "$outbound" -ge 0 ] 2>/dev/null; then
    sudo sed -i 's/outbound=.*/outbound='$outbound'/' $configs/hornet.cfg
fi
sudo sed -i 's/seed=.*/seed='$seed'/' $configs/hornet.cfg

# Updater for GoShimmer.cfg
if [ ! -z "$gsautopeeringport" ]; then
    sudo sed -i 's/gsautopeeringport=.*/gsautopeeringport='$gsautopeeringport'/' $configs/goshimmer.cfg
fi
if [ ! -z "$gsgossipport" ]; then
    sudo sed -i 's/gsgossipport=.*/gsgossipport='$gsgossipport'/' $configs/goshimmer.cfg
fi

# Upater for Nginx.cfg
sudo sed -i 's/domain=.*/domain=\"'$domain'\"/' $configs/proxy.cfg
sudo sed -i 's/nodeport=.*/nodeport='$nodeport'/' $configs/proxy.cfg
sudo sed -i 's/apiprotection=.*/apiprotection='$apiprotection'/' $configs/proxy.cfg

# Upater for SWARM.cfg
if [ ! -z "$node" ]; then
    sudo sed -i 's/node=.*/node='$node'/' $configs/swarm.cfg
fi
if [ ! -z "$updatenotifier" ]; then
    sudo sed -i 's/updatenotifier=.*/updatenotifier='$updatenotifier'/' $configs/swarm.cfg
fi
sudo sed -i 's/theme=.*/theme='$theme'/' $configs/swarm.cfg
sudo sed -i 's/autoupdate=.*/autoupdate='$autoupdate'/' $configs/swarm.cfg
if [ ! -z "$keepdb" ]; then
    sudo sed -i 's/keepdb=.*/keepdb='$keepdb'/' $configs/swarm.cfg
fi
sudo sed -i 's/checksync=.*/checksync='$checksync'/' $configs/swarm.cfg
sudo sed -i 's/maxlmi=.*/maxlmi='$maxlmi'/' $configs/swarm.cfg
if [ ! -z "$proxycheck" ]; then
    sudo sed -i 's/proxycheck=.*/proxycheck='$proxycheck'/' $configs/swarm.cfg
fi
sudo sed -i 's/logpruning=.*/logpruning='$logpruning'/' $configs/swarm.cfg
sudo sed -i 's/logsize=.*/logsize='$logsize'/' $configs/swarm.cfg
sudo sed -i 's/maxdbsize=.*/maxdbsize='$maxdbsize'/' $configs/swarm.cfg

####################################################################################################################################

# Updater for swarm.log
if [ ! -z "$branch" ]; then
    sudo sed -i 's/branch=.*/branch='$branch'/' $logs/swarm
fi
if [ ! -z "$goinfo" ]; then
    sudo sed -i 's/goinfo=.*/goinfo='$goinfo'/' $logs/swarm
fi

# Updater for watchdog.log
if [ ! -z "$watchdog" ]; then
    sudo sed -i 's/watchdog=.*/watchdog='$watchdog'/' $logs/watchdog
fi
if [ ! -z "$statuscounter" ]; then
    sudo sed -i 's/statuscounter=.*/statuscounter='$statuscounter'/' $logs/watchdog
fi
if [ ! -z "$restartdt" ]; then
    sudo sed -i "s,restartdt=.*,restartdt=\"$restartdt\"," $logs/watchdog
fi

# Updater for dbpruner.log
if [ ! -z "$dbpruner" ]; then
    sudo sed -i 's/dbpruner=.*/dbpruner='$dbpruner'/' $logs/dbpruner
fi
if [ ! -z "$dbplock" ]; then
    sudo sed -i 's/dbplock=.*/dbplock='$dbplock'/' $logs/dbpruner
fi
if [ ! -z "$pruningmultiplier" ]; then
    sudo sed -i 's/pruningmultiplier=.*/pruningmultiplier='$pruningmultiplier'/' $logs/dbpruner
fi
if [ ! -z "$pruningdt" ]; then
    sudo sed -i "s,pruningdt=.*,pruningdt=\"$pruningdt\","
fi
