#!/bin/bash

if [ ! -z "$goshimmerDashboardAuthEnabled" ]; then
    parser="$(jq '.dashboard.basic_auth.enabled' $goshimmerDir/$goshimmerConfig.json)"
    if [ "$parser" != "$goshimmerDashboardUsername" ]; then
        sudo jq '.dashboard.basic_auth.enabled = '$goshimmerDashboardAuthEnabled'' $goshimmerDir/config.json|sponge $goshimmerDir/config.json
        restartGoshimmer=true
    fi
fi

if [ ! -z "$goshimmerDashboardUsername" ]; then
    parser="$(jq '.dashboard.basic_auth.password' $goshimmerDir/$goshimmerConfig.json)"
    if [ "$parser" != "\"$goshimmerDashboardUsername\"" ]; then
        sudo jq '.dashboard.basic_auth.password = "'$goshimmerDashboardUsername'"' $goshimmerDir/config.json|sponge $goshimmerDir/config.json
        restartGoshimmer=true
    fi
fi

if [ ! -z "$goshimmerDashboardPassword" ]; then
    parser="$(jq '.dashboard.basic_auth.password' $goshimmerDir/$goshimmerConfig.json)"
    if [ "$parser" != "\"$goshimmerDashboardPassword\"" ]; then
        sudo jq '.dashboard.basic_auth.password = "'$goshimmerDashboardPassword'"' $goshimmerDir/config.json|sponge $goshimmerDir/config.json
        restartGoshimmer=true
    fi
fi