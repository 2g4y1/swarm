#!/bin/bash

if [ -d "/etc/nginx" ]; then
    if [ ! -f "/etc/nginx/dash/.htpasswd" ]; then
        sudo touch /etc/nginx/dash/.htpasswd
    fi
    if [ ! -f "/etc/nginx/api/.htpasswd" ]; then
        sudo touch /etc/nginx/api/.htpasswd
    fi
else
    echo -e $text_red "Please deploy the reverse proxy first!"
fi

echo -e $text_yellow && read -p " Would like to edit the (1)dashboard user, (2)API user or cancel: " aupopt

if [ "$aupopt" = "1" ]; then
    sudo nano /etc/nginx/dash/.htpasswd
    sudo systemctl reload nginx
    echo -e $text_yellow && echo " Dashboard user updated!" && echo -e $text_reset
fi

if [ "$aupopt" = "2" ]; then
    sudo nano /etc/nginx/api/.htpasswd
    sudo systemctl reload nginx
    echo -e $text_yellow && echo " API user updated!" && echo -e $text_reset
fi

# Unset all var
unset aupopt